{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\common\\script\\basic/assets\\common\\script\\basic\\UIFunc.js"],"names":["window","uiFunc","uiList","cacheUIList","openUI","uiName","callBack","i","length","temp","name","active","parent","cc","Canvas","instance","node","push","splice","panel","getComponent","show","clientEvent","dispatch","eventType","loader","loadRes","err","prefab","error","message","instantiate","closeUI","removeFromParent","hide","findUI"],"mappings":"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","file":"UIFunc.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\common\\script\\basic","sourcesContent":["/*\r\n    create by hao.c 2018/04/10\r\n\r\n    desc: 游戏显示相关操作逻辑\r\n */\r\n\r\nwindow.uiFunc = {\r\n    uiList: [],\r\n    cacheUIList: []\r\n};\r\n\r\nuiFunc.openUI = function(uiName, callBack) {\r\n    // 缓存--\r\n    for (var i = 0; i < uiFunc.cacheUIList.length; i++) {\r\n        var temp = uiFunc.cacheUIList[i];\r\n        if (temp && temp.name === uiName) {\r\n            temp.active = true;\r\n            temp.parent = cc.Canvas.instance.node;\r\n            uiFunc.uiList.push(temp)\r\n            uiFunc.cacheUIList.splice(i, 1);\r\n\r\n            var panel = temp.getComponent(\"uiPanel\");\r\n            if (panel) {\r\n                panel.show();\r\n            }\r\n\r\n            // event--\r\n            if (callBack) {\r\n                callBack(temp);\r\n            }\r\n            clientEvent.dispatch(clientEvent.eventType.openUI);\r\n            return;\r\n        }\r\n    }\r\n    // 非缓存--\r\n    cc.loader.loadRes('ui/' + uiName, function(err, prefab) {\r\n        if (err) {\r\n            cc.error(err.message || err);\r\n            return;\r\n        }\r\n\r\n        var temp = cc.instantiate(prefab);\r\n        temp.parent = cc.Canvas.instance.node;\r\n        uiFunc.uiList.push(temp)\r\n\r\n        var panel = temp.getComponent(\"uiPanel\");\r\n        if (panel) {\r\n            panel.show();\r\n        }\r\n\r\n        // event--\r\n        if (callBack) {\r\n            callBack(temp);\r\n        }\r\n        clientEvent.dispatch(clientEvent.eventType.openUI);\r\n    });\r\n};\r\n\r\nuiFunc.closeUI = function(uiName, callBack) {\r\n    for (var i = uiFunc.uiList.length - 1; i >= 0; i--) {\r\n        var temp = uiFunc.uiList[i];\r\n        if (temp && temp.name === uiName) {\r\n            temp.active = false;\r\n            temp.removeFromParent(true);\r\n            uiFunc.cacheUIList.push(temp);\r\n            uiFunc.uiList.splice(i, 1);\r\n\r\n            var panel = temp.getComponent(\"uiPanel\");\r\n            if (panel) {\r\n                panel.hide();\r\n            }\r\n\r\n            clientEvent.dispatch(clientEvent.eventType.closeUI);\r\n            if (callBack) {\r\n                callBack();\r\n            }\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\nuiFunc.findUI = function(uiName) {\r\n    for (var i = uiFunc.uiList.length - 1; i >= 0; i--) {\r\n        var temp = uiFunc.uiList[i];\r\n        if (temp && temp.name === uiName) {\r\n            return temp;\r\n        }\r\n    }\r\n}\r\n"]}