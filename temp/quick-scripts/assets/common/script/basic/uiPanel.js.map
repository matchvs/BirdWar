{"version":3,"sources":["uiPanel.js"],"names":["PanelAnimation","cc","Enum","None","ScaleAndAlpha","Class","extends","Component","properties","showAnimation","default","type","hideAnimation","isUseMask","onLoad","nodeDict","linkWidget","self","children","i","length","widgetName","name","indexOf","nodeName","substring","error","childrenCount","bind","node","anim","getComponent","Animation","addComponent","on","showCompleted","show","active","clipName","addClip","dataFunc","uiPanelAnimationClips","play","console","log","hide","clientEvent","clear","onDestroy","off"],"mappings":"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","file":"uiPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\common\\script\\basic","sourcesContent":["var PanelAnimation = cc.Enum({\r\n    None: -1,\r\n    ScaleAndAlpha: -1\r\n});\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        showAnimation: {\r\n            default: PanelAnimation.None,\r\n            type: PanelAnimation\r\n        },\r\n        hideAnimation: {\r\n            default: PanelAnimation.None,\r\n            type: PanelAnimation\r\n        },\r\n        isUseMask: false\r\n    },\r\n\r\n    onLoad: function() {\r\n        // node load --\r\n        this.nodeDict = {};\r\n\r\n        var linkWidget = function(self, nodeDict) {\r\n            var children = self.children;\r\n            for (var i = 0; i < children.length; i++) {\r\n                var widgetName = children[i].name;\r\n                if (widgetName && widgetName.indexOf(\"key_\") >= 0) {\r\n                    var nodeName = widgetName.substring(4);\r\n                    if (nodeDict[nodeName]) {\r\n                        cc.error(\"控件名字重复!\" + children[i].name);\r\n                    }\r\n                    nodeDict[nodeName] = children[i];\r\n                }\r\n                if (children[i].childrenCount > 0) {\r\n                    linkWidget(children[i], nodeDict);\r\n                }\r\n            }\r\n        }.bind(this);\r\n        linkWidget(this.node, this.nodeDict);\r\n\r\n        // 添加动画--\r\n        if (!this.showAnimation || !this.hideAnimation) {\r\n            this.anim = this.getComponent(cc.Animation);\r\n            if (!this.anim) {\r\n                this.anim = this.addComponent(cc.Animation);\r\n            }\r\n            this.anim.on('finished', this.showCompleted, this);\r\n        }\r\n    },\r\n\r\n    show: function() {\r\n        if (this.showAnimation === PanelAnimation.None) {\r\n            this.node.active = true;\r\n        } else {\r\n            var clipName = PanelAnimation[this.showAnimation];\r\n            this.anim.addClip(dataFunc.uiPanelAnimationClips[clipName]);\r\n            this.anim.play(clipName);\r\n        }\r\n    },\r\n\r\n    showCompleted: function() {\r\n        console.log(this.node.name + \"动画播放完毕～\");\r\n    },\r\n\r\n    hide: function() {\r\n        if (this.hideAnimation === PanelAnimation.None) {\r\n            this.node.active = false;\r\n        } else {\r\n            var clipName = PanelAnimation[this.hideAnimation];\r\n            this.anim.addClip(dataFunc.uiPanelAnimationClips[clipName]);\r\n            this.anim.play(clipName);\r\n        }\r\n        // 解除事件绑定--\r\n        clientEvent.clear(this);\r\n    },\r\n\r\n    onDestroy: function() {\r\n        if (this.anim) {\r\n            this.anim.off('finished', this.showCompleted, this);\r\n        }\r\n    },\r\n});\r\n"]}